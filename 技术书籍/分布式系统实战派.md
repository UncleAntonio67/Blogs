---
tags:
  - 技术书籍
aliases:
  - 分布式系统实战派
time: 20251213——
---

作者：张伟洋                       
阅读日期：202501213——20250
# 目录

**第一篇 后端体系架构认知**
第1章——从单体架构到微服务架构的演变过程
第2章——几张图了解后端系统
第3章——微服务间的交互

**第二篇 分布式技术转向**
第4章——分布式系统的通信机制
第5章——分布式数据库
第6章——典型的分布式存储系统
第7章——分布式事务——确保分布式系统中的数据一致性
第8章——消息中间件——分布式系统中的异步通信利器

**第三篇 高可用和数据安全策略**
第9章——冗余备份——数据的备份和容灾策略
第10章——高可用与异地多活——提高系统的稳定性和故障恢复能力
第四章 分布式系统项目设计
第11章——【项目实现】支持5kw用户同时在线的短视频系统设计
第12章——【项目实战】日均订单量8kw的外卖系统设计

# 第1章 从单体架构到微服务架构的演变过程

## 1.1 什么是单体架构

**单体架构**：将所有的功能模块都放在一个代码库中，作为一个系统进行开发、部署和扩展。
- 优点：简单、一致、开发便捷、部署简单、原子性强
- 缺点：难扩展（垂直扩展）、修改风险大、难以迭代、协作困难、性能瓶颈

使用场景：小型应用、短期项目、快速原型验证

## 1.2 从单体架构到集群架构——多台机器协同

集群架构，单体应用集群化部署，往往由客户端、服务器集群、负载均衡、数据库

- 水平扩展：增加服务器，灵活成本低
- 垂直扩展：增加单个服务器的配置，简单集中成本高

弹性伸缩：动态调整集群规划，根据集群的监控指标，分析预测使用自动化的工具与脚本，定于伸缩策略和阈值。比如k8s等等。

心跳检测：是故障转移策略的核心机制，能够在短时间内发现并处理节点故障，保障服务的持续运行。
故障转移：自动将工作负载从故障转移到其他部分，主动-主动/主动-被动两种模式。

数据库读写分离：读操作和写操作分析，主数据库的写入同步到从库，通过数据库的日志复制机制实现。
- 优点：并发、减轻主库的压力、增加备份、提高可用性
- 问题：数据延迟、复杂性增加、主库依然由写入瓶颈

分布式数据库：将数据分散存储在多个物理位置的数据库系统。高可扩展性、高可用性、数据局部性。

分表：大表分小表，水平（日期）/垂直
分库：数据分散到多个数据库实例，水平（用户id）/垂直

分库分表需要关注：数据一致性、查询变复杂、数据迁移。

## 1.3 从集群架构到微服务架构——精细拆分业务

微服务架构类似于应用层的微分。

微服务的服务划分：
- 业务功能解耦：系统被划分为多个小的、独立的服务
- 独立部署扩展：每个服务独立部署
- 专用数据存储：每个服务都有自己的数据库或存储
- 服务间通信：通过API或消息通信，不直接访问其他服务的数据库
- API网关：使用API网关，将请求路由到适当的后端服务

核心特性：独立性、自治性、多语言支持、分布式通讯、轻量级、容错性、可扩展

微服务的每个服务独立自治，增加架构复杂性，提升开发部署速度及技术栈的灵活性等

微服务架构的基本组件：
- 服务组件：服务、数据库、API网关
- 通讯机制：同步（rest/grpc）异步通讯（Kafka）
- 支持组件：服务注册发现、配置管理、负载均衡、断路器
- 安全性和监控：身份认证授权、日志管理、监控告警
- Devops和自动化：容器化、CICD、编排工具

## 1.4 微服务架构与分布式架构

- 微服务架构是分布式架构的子集，专注于业务功能的划分和服务的自治性
- 分布式架构强调数据和计算的分散

分布式架构的通信往往是节点直接进行的。

分布式架构：分布式、并发性、扩展性、透明性、容错性

分布式架构，应用通过作为一个单一的大型应用进行构建和部署，每个服务器上运行的都是完整的应用副本。对比：

|       | 分布式架构              | 微服务架构            |
| ----- | ------------------ | ---------------- |
| 规模    | 多个计算节点的架构，比如分布式数据库 | 多个业务微服务          |
| 独立性   | 依赖共享资源协作完成，不要求完全自治 | 独立自治             |
| 通信方式  | 采用多种协议和模式、多样化      | 轻量级、Restful、消息队列 |
| 运维复杂性 | 涉及不同类型组件和系统的协同     | 涉及多服务的管理和协调      |
🎈微服务架构是一种特定的分布式架构，强调服务的独立性和小规模化

## 1.5 从单体架构到微服务架构的迁移——让系统更稳定

迁移到微服务架构要考虑的因素：
- 业务需求和规划
- 团队结构
- 技术能力和培训
- 数据一致性和集成

# 第2章 几张图了解后端系统

## 2.1 一张图看懂整个后端系统架构

![[0861e109a1d72ba6e75256b328e9cae.jpg | 400]]


