ğŸ·å›°éš¾ #æ•°ç»„ #å›æº¯ 

æŒ‰ç…§å›½é™…è±¡æ£‹çš„è§„åˆ™ï¼Œçš‡åå¯ä»¥æ”»å‡»ä¸ä¹‹å¤„åœ¨åŒä¸€è¡Œæˆ–åŒä¸€åˆ—æˆ–åŒä¸€æ–œçº¿ä¸Šçš„æ£‹å­ã€‚

**nÂ çš‡åé—®é¢˜**Â ç ”ç©¶çš„æ˜¯å¦‚ä½•å°†Â `n`Â ä¸ªçš‡åæ”¾ç½®åœ¨Â `nÃ—n`Â çš„æ£‹ç›˜ä¸Šï¼Œå¹¶ä¸”ä½¿çš‡åå½¼æ­¤ä¹‹é—´ä¸èƒ½ç›¸äº’æ”»å‡»ã€‚

ç»™ä½ ä¸€ä¸ªæ•´æ•°Â `n`Â ï¼Œè¿”å›æ‰€æœ‰ä¸åŒçš„Â **nÂ çš‡åé—®é¢˜**Â çš„è§£å†³æ–¹æ¡ˆã€‚

æ¯ä¸€ç§è§£æ³•åŒ…å«ä¸€ä¸ªä¸åŒçš„Â **n çš‡åé—®é¢˜**Â çš„æ£‹å­æ”¾ç½®æ–¹æ¡ˆï¼Œè¯¥æ–¹æ¡ˆä¸­Â `'Q'`Â å’ŒÂ `'.'`Â åˆ†åˆ«ä»£è¡¨äº†çš‡åå’Œç©ºä½ã€‚

**ç¤ºä¾‹ 1ï¼š**

![[file-20251118202703317.jpg | 400]]

>è¾“å…¥ï¼šn = 4
>è¾“å‡ºï¼š`[[".Q..","...Q","Q...","..Q."],["..Q.","Q...","...Q",".Q.."]]`
>è§£é‡Šï¼šå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œ4 çš‡åé—®é¢˜å­˜åœ¨ä¸¤ä¸ªä¸åŒçš„è§£æ³•ã€‚

ç¤ºä¾‹ 2ï¼š

>è¾“å…¥ï¼š`n = 1`
>è¾“å‡ºï¼š`[["Q"]]`

**æç¤ºï¼š**
- `1 <= n <= 9`

# è§£é¢˜æ€è·¯ä¸å®ç°

1. **æŒ‰è¡Œé€’å½’æ”¾ç½®çš‡å**
2. **æ¯è¡Œå°è¯•æ¯ä¸€åˆ—**ï¼Œå†²çªåˆ™è·³è¿‡
3. **æ”¾ç½®çš‡å â†’ é€’å½’ä¸‹ä¸€è¡Œ â†’ å›æº¯æ’¤é”€**
4. **row == n â†’ ä¿å­˜æ–¹æ¡ˆ**
5. å›æº¯ä¼šè‡ªåŠ¨å°è¯•æ‰€æœ‰å¯èƒ½ï¼Œæœ€ç»ˆç”Ÿæˆå…¨éƒ¨åˆæ³•æ–¹æ¡ˆ

> é€šè¿‡å›æº¯ç®—æ³•ï¼ŒN çš‡åé—®é¢˜å°±æ˜¯ä¸æ–­å°è¯• + æ’¤é”€ + å‰ªæçš„è¿‡ç¨‹ï¼Œæ¯æ¬¡é€’å½’éƒ½â€œè‡ªç„¶ä¿è¯è¡Œä¸å†²çªâ€ã€‚

| **ç»´åº¦**    | **åˆ†æå†…å®¹**                                                                                                                                                                   |
| --------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **æ ¸å¿ƒæ€è·¯**  | **å—é™å›æº¯ (Row-by-Row Exploration)**ã€‚<br>1. **æŒ‰è¡Œæœç´¢**ï¼šæ¯ä¸€å±‚é€’å½’å¤„ç†ä¸€è¡Œï¼Œç¡®ä¿äº†è¡Œä¹‹é—´ä¸ä¼šå†²çªã€‚<br>2. **å†²çªåˆ¤å®š**ï¼šåˆ©ç”¨ `cols`, `diag1`, `diag2` ä¸‰ä¸ªé›†åˆè®°å½•è¢«æ”»å‡»çš„åˆ—å’Œå¯¹è§’çº¿ã€‚<br>3. **çŠ¶æ€æ¢å¤**ï¼šå…¸å‹çš„â€œåšé€‰æ‹© -> é€’å½’ -> æ’¤é”€é€‰æ‹©â€ã€‚ |
| **å¯¹è§’çº¿é€»è¾‘** | **æ•°å­¦è§„å¾‹åº”ç”¨**ï¼š<br>1. **ä¸»å¯¹è§’çº¿ (`diag1`)**ï¼šåŒä¸€æ¡çº¿ä¸Š $row - col$ ä¸ºå¸¸æ•°ã€‚<br>2. **å‰¯å¯¹è§’çº¿ (`diag2`)**ï¼šåŒä¸€æ¡çº¿ä¸Š $row + col$ ä¸ºå¸¸æ•°ã€‚                                                                |
| **æ—¶é—´å¤æ‚åº¦** | $O(N!)$<br>ç¬¬ä¸€è¡Œæœ‰ $N$ ç§é€‰æ³•ï¼Œç¬¬äºŒè¡Œæœ€å¤š $N-2$ ç§ï¼Œä¾æ­¤ç±»æ¨ã€‚å°½ç®¡æœ‰çº¦æŸï¼Œå…¶ä¸Šé™ä»ä¸ºé˜¶ä¹˜çº§åˆ«ã€‚                                                                                                                |
| **ç©ºé—´å¤æ‚åº¦** | $O(N^2)$<br>ä¸»è¦ç”¨äºå­˜å‚¨æ£‹ç›˜çŠ¶æ€ `board` å’Œç»“æœé›†ã€‚å¦‚æœä¸è®¡ç»“æœï¼Œé€’å½’æ·±åº¦ä¸º $O(N)$ã€‚                                                                                                                   |

## æ–¹æ³•ä¸€ï¼š

```python
class Solution:
    def solveNQueens(self, n: int) -> List[List[str]]:
        res = []
        board = [["."] * n for _ in range(n)]
        cols = set()
        diag1 = set()
        diag2 = set()

        def dfs(row: int):
            if row == n:
                res.append(["".join(r) for r in board])
                return
            for col in range(n):
                if col in cols or (row-col) in diag1 or (row + col) in diag2:
                    continue
            
                board[row][col] = "Q"
                cols.add(col)
                diag1.add(row - col)
                diag2.add(row + col)

                dfs(row + 1)

                board[row][col] = "."
                cols.remove(col)
                diag1.remove(row - col)
                diag2.remove(row + col)

        dfs(0)
        return res
```

