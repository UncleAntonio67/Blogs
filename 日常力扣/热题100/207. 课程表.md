ğŸ·ä¸­ç­‰ #æ·±åº¦ä¼˜å…ˆæœç´¢ #å¹¿åº¦ä¼˜å…ˆæœç´¢ #å›¾ #æ‹“æ‰‘æ’åº

ä½ è¿™ä¸ªå­¦æœŸå¿…é¡»é€‰ä¿®Â `numCourses`Â é—¨è¯¾ç¨‹ï¼Œè®°ä¸ºÂ `0`Â åˆ°Â `numCourses - 1`Â ã€‚

åœ¨é€‰ä¿®æŸäº›è¯¾ç¨‹ä¹‹å‰éœ€è¦ä¸€äº›å…ˆä¿®è¯¾ç¨‹ã€‚ å…ˆä¿®è¯¾ç¨‹æŒ‰æ•°ç»„Â `prerequisites`Â ç»™å‡ºï¼Œå…¶ä¸­Â `prerequisites[i] = [ai, bi]`Â ï¼Œè¡¨ç¤ºå¦‚æœè¦å­¦ä¹ è¯¾ç¨‹Â `ai`Â åˆ™Â **å¿…é¡»**Â å…ˆå­¦ä¹ è¯¾ç¨‹Â Â `bi`Â ã€‚

- ä¾‹å¦‚ï¼Œå…ˆä¿®è¯¾ç¨‹å¯¹Â `[0, 1]`Â è¡¨ç¤ºï¼šæƒ³è¦å­¦ä¹ è¯¾ç¨‹Â `0`Â ï¼Œä½ éœ€è¦å…ˆå®Œæˆè¯¾ç¨‹Â `1`Â ã€‚

è¯·ä½ åˆ¤æ–­æ˜¯å¦å¯èƒ½å®Œæˆæ‰€æœ‰è¯¾ç¨‹çš„å­¦ä¹ ï¼Ÿå¦‚æœå¯ä»¥ï¼Œè¿”å›Â `true`Â ï¼›å¦åˆ™ï¼Œè¿”å›Â `false`Â ã€‚

ç¤ºä¾‹ 1ï¼š

>è¾“å…¥ï¼š`numCourses = 2, prerequisites = [[1,0]]`
>è¾“å‡ºï¼š`true`
>è§£é‡Šï¼š`æ€»å…±æœ‰ 2 é—¨è¯¾ç¨‹ã€‚å­¦ä¹ è¯¾ç¨‹ 1 ä¹‹å‰ï¼Œä½ éœ€è¦å®Œæˆè¯¾ç¨‹ 0 ã€‚è¿™æ˜¯å¯èƒ½çš„ã€‚`

ç¤ºä¾‹ 2ï¼š

>è¾“å…¥ï¼š`numCourses = 2, prerequisites = [[1,0],[0,1]]`
>è¾“å‡ºï¼š`false`
>è§£é‡Šï¼š`æ€»å…±æœ‰ 2 é—¨è¯¾ç¨‹ã€‚å­¦ä¹ è¯¾ç¨‹ 1 ä¹‹å‰ï¼Œä½ éœ€è¦å…ˆå®Œæˆâ€‹è¯¾ç¨‹ 0 ï¼›å¹¶ä¸”å­¦ä¹ è¯¾ç¨‹ 0 ä¹‹å‰ï¼Œä½ è¿˜åº”å…ˆå®Œæˆè¯¾ç¨‹ 1 ã€‚è¿™æ˜¯ä¸å¯èƒ½çš„ã€‚`

**æç¤ºï¼š**

- `1 <= numCourses <= 2000`
- `0 <= prerequisites.length <= 5000`
- `prerequisites[i].length == 2`
- `0 <= ai, bi < numCourses`
- `prerequisites[i]`Â ä¸­çš„æ‰€æœ‰è¯¾ç¨‹å¯¹Â **äº’ä¸ç›¸åŒ**

# è§£é¢˜æ€è·¯ä¸å®ç°

- **å»ºå›¾**ï¼š  
    `b â†’ a` è¡¨ç¤ºå­¦å®Œ b æ‰èƒ½å­¦ aï¼›
- **å…¥åº¦æ•°ç»„ indeg**ï¼š  
    `indeg[a]` è¡¨ç¤º a è¿˜æœ‰å¤šå°‘å‰ç½®è¯¾æ²¡ä¿®ï¼›
- **BFS é˜Ÿåˆ—**ï¼š  
    ä¸€å¼€å§‹æŠŠå…¥åº¦ä¸º 0 çš„è¯¾ç¨‹å…¥é˜Ÿï¼ˆå¯ä»¥ç›´æ¥å­¦çš„è¯¾ï¼‰ï¼›
- **å­¦ä¹ è¿‡ç¨‹**ï¼š  
    æ¯æ¬¡ä»é˜Ÿåˆ—å–å‡ºä¸€é—¨è¯¾ï¼Œè§†ä¸ºâ€œå·²ä¿®â€ï¼ŒåŒæ—¶è®©å®ƒçš„åç»§è¯¾ç¨‹å…¥åº¦å‡ 1ï¼›
- **ç»Ÿè®¡ä¿®å®Œçš„è¯¾æ•°**ï¼š  
    å¦‚æœæœ€åä¿®å®Œçš„è¯¾æ•°é‡ = æ€»è¯¾ç¨‹æ•° â†’ âœ… å¯è¡Œã€‚

| **ç»´åº¦**    | **åˆ†æå†…å®¹**                                                                                                                                                                  |
| --------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **æ ¸å¿ƒæ€è·¯**  | **æœ‰å‘æ— ç¯å›¾ (DAG) åˆ¤å®š / æ‹“æ‰‘æ’åº**ã€‚<br>1. å»ºç«‹é‚»æ¥è¡¨ `graph` å’Œå…¥åº¦æ•°ç»„ `indeg`ã€‚<br>2. å°†æ‰€æœ‰å…¥åº¦ä¸º 0 çš„èŠ‚ç‚¹ï¼ˆå³æ²¡æœ‰å…ˆä¿®è¯¾çš„è¯¾ç¨‹ï¼‰å…¥é˜Ÿã€‚<br>3. é€ä¸ªå¼¹å‡ºèŠ‚ç‚¹å¹¶å‡å°å…¶é‚»æ¥ç‚¹çš„å…¥åº¦ï¼Œè‹¥é‚»æ¥ç‚¹å…¥åº¦å‡è‡³ 0 åˆ™å…¥é˜Ÿã€‚<br>4. æœ€åæ£€æŸ¥å¤„ç†è¿‡çš„è¯¾ç¨‹æ•° `taken` æ˜¯å¦ç­‰äºæ€»è¯¾ç¨‹æ•°ã€‚ |
| **ç©ºé—´å¤æ‚åº¦** | $O(V + E)$<br>å…¶ä¸­ $V$ æ˜¯è¯¾ç¨‹æ•° (`numCourses`)ï¼Œ$E$ æ˜¯å…ˆä¿®å…³ç³»æ•° (`prerequisites`)ã€‚<br>ä¸»è¦å¼€é”€åœ¨äºé‚»æ¥è¡¨ `graph`ï¼ˆå­˜å‚¨æ‰€æœ‰è¾¹ï¼‰å’Œå…¥åº¦æ•°ç»„ `indeg`ã€‚                                                          |
| **æ—¶é—´å¤æ‚åº¦** | $O(V + E)$<br>æ¯ä¸ªèŠ‚ç‚¹ï¼ˆè¯¾ç¨‹ï¼‰å’Œæ¯æ¡è¾¹ï¼ˆå…ˆä¿®å…³ç³»ï¼‰éƒ½ä¼šè¢«è®¿é—®ä¸”ä»…è®¿é—®ä¸€æ¬¡ã€‚                                                                                                                              |
| **ä¼˜ç‚¹**    | 1. **ç›´è§‚æ€§**ï¼šæ¨¡æ‹Ÿäº†å®é™…é€‰è¯¾çš„è¿‡ç¨‹ï¼ˆå…ˆä¿®å®Œç®€å•çš„ï¼Œå†è§£é”éš¾çš„ï¼‰ã€‚<br>2. **å¥å£®æ€§**ï¼šèƒ½å®Œç¾å¤„ç†éè¿é€šå›¾ï¼ˆå¤šä¸ªç‹¬ç«‹çš„é€‰è¯¾é“¾ï¼‰ã€‚<br>3. **æ£€æµ‹ç¯**ï¼šå¦‚æœå›¾ä¸­å­˜åœ¨ç¯ï¼Œç¯å†…èŠ‚ç‚¹çš„å…¥åº¦æ°¸è¿œä¸ä¼šå‡è‡³ 0ï¼Œæœ€ç»ˆ `taken != numCourses`ã€‚                                   |

## æ–¹æ³•ä¸€ï¼šé‚»æ¥è¡¨

```python
class Solution:
    def canFinish(self, numCourses: int, prerequisites: List[List[int]]) -> bool:
        indeg = [0] * numCourses
        graph = [[] for _ in range(numCourses)]
        for a,b in prerequisites:
            graph[b].append(a)
            indeg[a] += 1
        q = deque([i for i in range(numCourses) if indeg[i] == 0])
        taken = 0
        while q:
            cur = q.popleft()
            taken += 1
            for nxt in graph[cur]:
                indeg[nxt] -= 1
                if indeg[nxt] == 0:
                    q.append(nxt)
        return taken == numCourses
```
