ğŸ·ä¸­ç­‰ #æ•°ç»„ #å“ˆå¸Œè¡¨ #å‰ç¼€å’Œ

ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„Â `nums`Â å’Œä¸€ä¸ªæ•´æ•°Â `k`Â ï¼Œè¯·ä½ ç»Ÿè®¡å¹¶è¿”å›Â _è¯¥æ•°ç»„ä¸­å’Œä¸ºÂ `k`Â çš„å­æ•°ç»„çš„ä¸ªæ•°_Â ã€‚

å­æ•°ç»„æ˜¯æ•°ç»„ä¸­å…ƒç´ çš„è¿ç»­éç©ºåºåˆ—ã€‚

**ç¤ºä¾‹ 1ï¼š**

**è¾“å…¥ï¼šnums = [1,1,1], k = 2
è¾“å‡ºï¼š2

**ç¤ºä¾‹ 2ï¼š**

**è¾“å…¥ï¼šnums = [1,2,3], k = 3
è¾“å‡ºï¼š2

**æç¤ºï¼š**

- `1 <= nums.length <= 2 * 104`
- `-1000 <= nums[i] <= 1000`
- `-107 <= k <= 107`

# è§£é¢˜æ€è·¯ä¸å®ç°

- æš´åŠ›è§£æ³•ä¼šè¶…æ—¶
- é—®é¢˜è½¬åŒ–ä¸ºï¼šé€šè¿‡å‰ç¼€å’Œï¼Œä»»æ„èŒƒå›´çš„å­æ•°ç»„ ã€i, j) çš„å…ƒç´ å’Œå°±ç­‰äº preSum[j] - preSum[i]ã€‚æˆ‘ä»¬è¦æŸ¥æ‰¾çš„å°±æ˜¯å‰ç¼€å’Œæ•°ç»„ä¸­æ»¡è¶³ j > i ä¸” preSum[j] - preSum[i] = k çš„ä¸‹æ ‡å¯¹ (i,j) çš„ä¸ªæ•°ã€‚

![[file-20251029185817771.png]]

## æ–¹æ³•ä¸€ï¼šå‰ç¼€å’Œæ³•

```python
class Solution:
Â  Â  def subarraySum(self, nums: List[int], k: int) -> int:
Â  Â  Â  Â  ps_counts = {0:1}
Â  Â  Â  Â  res = 0
Â  Â  Â  Â  ps = 0
Â  Â  Â  Â  for num in nums:
Â  Â  Â  Â  Â  Â  ps += num
Â  Â  Â  Â  Â  Â  res += ps_counts.get(ps-k,0)
Â  Â  Â  Â  Â  Â  ps_counts[ps] = ps_counts.get(ps,0) + 1
Â  Â  Â  Â  return res
```