ğŸ·ä¸­ç­‰ #æ ‘ #æ·±åº¦ä¼˜å…ˆæœç´¢ #äºŒå‰æœç´¢æ ‘ #äºŒå‰æ ‘ 

ç»™ä½ ä¸€ä¸ªäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹Â `root`Â ï¼Œåˆ¤æ–­å…¶æ˜¯å¦æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„äºŒå‰æœç´¢æ ‘ã€‚

**æœ‰æ•ˆ**Â äºŒå‰æœç´¢æ ‘å®šä¹‰å¦‚ä¸‹ï¼š

- èŠ‚ç‚¹çš„å·¦å­æ ‘åªåŒ…å«Â **ä¸¥æ ¼å°äº**Â å½“å‰èŠ‚ç‚¹çš„æ•°ã€‚
- èŠ‚ç‚¹çš„å³å­æ ‘åªåŒ…å«Â **ä¸¥æ ¼å¤§äº**Â å½“å‰èŠ‚ç‚¹çš„æ•°ã€‚
- æ‰€æœ‰å·¦å­æ ‘å’Œå³å­æ ‘è‡ªèº«å¿…é¡»ä¹Ÿæ˜¯äºŒå‰æœç´¢æ ‘ã€‚

**ç¤ºä¾‹ 1ï¼š**

![ | 200](https://assets.leetcode.com/uploads/2020/12/01/tree1.jpg)

>è¾“å…¥ï¼š`root = [2,1,3]`
>è¾“å‡ºï¼š`true`

**ç¤ºä¾‹ 2ï¼š**

![|250](https://assets.leetcode.com/uploads/2020/12/01/tree2.jpg)

>è¾“å…¥ï¼š`root = [5,1,4,null,null,3,6]`
>è¾“å‡ºï¼š`false`
>è§£é‡Šï¼š`æ ¹èŠ‚ç‚¹çš„å€¼æ˜¯ 5 ï¼Œä½†æ˜¯å³å­èŠ‚ç‚¹çš„å€¼æ˜¯ 4 ã€‚`

**æç¤ºï¼š**

- æ ‘ä¸­èŠ‚ç‚¹æ•°ç›®èŒƒå›´åœ¨`[1, 104]`Â å†…
- `-231 <= Node.val <= 231 - 1`

| **ç»´åº¦**    | **æ–¹æ³•ä¸€ï¼šé™å®šå€¼åŸŸ (ä¸Šä¸‹ç•Œ DFS)**                                                                        | **æ–¹æ³•äºŒï¼šä¸­åºéå† (é€’å¢æ€§æ ¡éªŒ)**                                         |
| --------- | --------------------------------------------------------------------------------------------- | ------------------------------------------------------------ |
| **æ ¸å¿ƒæ€è·¯**  | **åˆ†æ²»/çº¦æŸä¼ é€’**ï¼šæ¯ä¸ªèŠ‚ç‚¹éƒ½å¿…é¡»è½åœ¨ä¸€ä¸ªç‰¹å®šçš„å¼€åŒºé—´ `(low, high)` å†…ã€‚å‘å·¦èµ°æ›´æ–°ä¸Šç•Œï¼Œå‘å³èµ°æ›´æ–°ä¸‹ç•Œã€‚                                | **ç‰¹æ€§åˆ©ç”¨**ï¼šBST çš„ä¸­åºéå†åºåˆ—å¿…é¡»æ˜¯**ä¸¥æ ¼é€’å¢**çš„ã€‚åªéœ€è®°å½•å‰ä¸€ä¸ªèŠ‚ç‚¹çš„å€¼ `prev` è¿›è¡Œæ¯”è¾ƒã€‚    |
| **æ ¸å¿ƒä»£ç **  | `low < node.val < high`<br><br>`dfs(left, low, node.val)`<br><br>`dfs(right, node.val, high)` | `if node.val <= prev: return False`<br><br>`prev = node.val` |
| **æ—¶é—´å¤æ‚åº¦** | **$O(n)$**ï¼šæ¯ä¸ªèŠ‚ç‚¹è®¿é—®ä¸€æ¬¡ã€‚                                                                          | **$O(n)$**ï¼šæ¯ä¸ªèŠ‚ç‚¹è®¿é—®ä¸€æ¬¡ã€‚                                         |
| **ç©ºé—´å¤æ‚åº¦** | **$O(h)$**ï¼šå–å†³äºé€’å½’æ ˆæ·±åº¦ï¼ˆæ ‘é«˜ï¼‰ã€‚                                                                      | **$O(h)$**ï¼šé€’å½’æˆ–æ˜¾å¼æ ˆæ·±åº¦ï¼ˆæ ‘é«˜ï¼‰ã€‚                                     |
| **ä¼˜ç‚¹**    | é€»è¾‘ä¸¥å¯†ï¼Œç›´æ¥åˆ©ç”¨äºŒå‰æ ‘é€’å½’å®šä¹‰ï¼Œä¸ä¾èµ–éå†é¡ºåºã€‚                                                                     | éå¸¸ç›´è§‚ï¼Œæ˜“äºç†è§£ã€‚é…åˆè¿­ä»£ï¼ˆæ ˆï¼‰å®ç°æ—¶ï¼Œå¯ä»¥åœ¨å‘ç°é”™è¯¯æ—¶ç«‹å³æå‰ç»ˆæ­¢ã€‚                         |

# è§£é¢˜æ€è·¯ä¸å®ç°

- é€’å½’
- æ³¨æ„æ¯ä¸ªèŠ‚ç‚¹çš„ä¸Šä¸‹é™

## æ–¹æ³•ä¸€ï¼šé€’å½’

```python
class Solution:
    def isValidBST(self, root: Optional[TreeNode]) -> bool:
        def dfs(node, low = float('-inf'), high = float('inf')):
            if not node:
                return True
            if not (low < node.val < high):
                return False
            return dfs(node.left, low, node.val) and dfs(node.right, node.val, high) 
        return dfs(root)
```

## æ–¹æ³•äºŒï¼šä¸­åºéå†

```python
def isValidBST(root):
    stack, prev = [], float('-inf')
    cur = root
    while stack or cur:
        while cur:
            stack.append(cur)
            cur = cur.left
        cur = stack.pop()
        # å¦‚æœå½“å‰å€¼ä¸å¤§äºå‰ä¸€ä¸ªå€¼ï¼Œåˆ™ä¸åˆæ³•
        if cur.val <= prev:
            return False
        prev = cur.val
        cur = cur.right
    return True
```