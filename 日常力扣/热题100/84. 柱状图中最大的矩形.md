ğŸ·å›°éš¾ #æ ˆ #æ•°ç»„ #å•è°ƒæ ˆ 

ç»™å®šÂ _n_Â ä¸ªéè´Ÿæ•´æ•°ï¼Œç”¨æ¥è¡¨ç¤ºæŸ±çŠ¶å›¾ä¸­å„ä¸ªæŸ±å­çš„é«˜åº¦ã€‚æ¯ä¸ªæŸ±å­å½¼æ­¤ç›¸é‚»ï¼Œä¸”å®½åº¦ä¸º 1 ã€‚

æ±‚åœ¨è¯¥æŸ±çŠ¶å›¾ä¸­ï¼Œèƒ½å¤Ÿå‹¾å‹’å‡ºæ¥çš„çŸ©å½¢çš„æœ€å¤§é¢ç§¯ã€‚

**ç¤ºä¾‹ 1:**

![| 300](https://assets.leetcode.com/uploads/2021/01/04/histogram.jpg)

è¾“å…¥ï¼šheights = [2,1,5,6,2,3]
è¾“å‡ºï¼š10
è§£é‡Šï¼šæœ€å¤§çš„çŸ©å½¢ä¸ºå›¾ä¸­çº¢è‰²åŒºåŸŸï¼Œé¢ç§¯ä¸º 10

**ç¤ºä¾‹ 2ï¼š**

![| 100](https://assets.leetcode.com/uploads/2021/01/04/histogram-1.jpg)

**è¾“å…¥ï¼š** heights = [2,4]
**è¾“å‡ºï¼š** 4

**æç¤ºï¼š**

- `1 <= heights.length <=105`
- `0 <= heights[i] <= 104`

# è§£é¢˜æ€è·¯ä¸å®ç°

è§£å†³è¿™é“é¢˜æœ€æœ‰æ•ˆçš„æ–¹æ³•æ˜¯ä½¿ç”¨**å•è°ƒæ ˆ**ã€‚æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š

å¯¹äºæŸ±çŠ¶å›¾ä¸­çš„**ä»»æ„ä¸€ä¸ªæŸ±å­ $i$**ï¼Œå¦‚æœå®ƒä½œä¸ºæ‰€æ±‚æœ€å¤§çŸ©å½¢ä¸­çš„**é«˜åº¦**ï¼Œé‚£ä¹ˆè¿™ä¸ªçŸ©å½¢çš„å®½åº¦ $W$ å¿…é¡»æ»¡è¶³ï¼š
1. çŸ©å½¢çš„é«˜åº¦ $H = \text{heights}[i]$ã€‚
2. çŸ©å½¢å‘å·¦å»¶ä¼¸åˆ°çš„è¾¹ç•Œ $L$ æ˜¯**ç¬¬ä¸€ä¸ªé«˜åº¦å°äº $\text{heights}[i]$ çš„æŸ±å­**çš„ç´¢å¼• $+1$ã€‚
3. çŸ©å½¢å‘å³å»¶ä¼¸åˆ°çš„è¾¹ç•Œ $R$ æ˜¯**ç¬¬ä¸€ä¸ªé«˜åº¦å°äº $\text{heights}[i]$ çš„æŸ±å­**çš„ç´¢å¼• $-1$ã€‚
4. æœ€å¤§å®½åº¦ $W = R - L + 1$ã€‚
5. ä»¥ $\text{heights}[i]$ ä¸ºé«˜çš„æœ€å¤§çŸ©å½¢é¢ç§¯ $A = \text{heights}[i] \times W$ã€‚

å•è°ƒæ ˆï¼ˆæœ¬é¢˜ä¸­ä½¿ç”¨**å•è°ƒé€’å¢æ ˆ**ï¼‰æ­£æ˜¯ç”¨æ¥é«˜æ•ˆåœ°æ‰¾åˆ°æ¯ä¸ªæŸ±å­å·¦å³ä¸¤ä¾§**ç¬¬ä¸€ä¸ªå°äºå®ƒçš„å…ƒç´ **çš„ä½ç½®ã€‚

## æ–¹æ³•ä¸€ï¼š

```python
class Solution:
    def largestRectangleArea(self, heights: List[int]) -> int:
        stack = [-1]
        max_area = 0
        heights.append(0)
        for i,h in enumerate(heights):
            while stack[-1] != -1 and heights[stack[-1]] >= h:
                height_index = stack.pop()
                H = heights[height_index]
                W = i - stack[-1] -1
                max_area = max(max_area, H * W)
            stack.append(i)

        return max_area
```