ğŸ·å›°éš¾ #è®¾è®¡ #åŒæŒ‡é’ˆ #æ•°æ®æµ #æ’åº #å †ï¼ˆä¼˜å…ˆé˜Ÿåˆ—ï¼‰

**ä¸­ä½æ•°**æ˜¯æœ‰åºæ•´æ•°åˆ—è¡¨ä¸­çš„ä¸­é—´å€¼ã€‚å¦‚æœåˆ—è¡¨çš„å¤§å°æ˜¯å¶æ•°ï¼Œåˆ™æ²¡æœ‰ä¸­é—´å€¼ï¼Œä¸­ä½æ•°æ˜¯ä¸¤ä¸ªä¸­é—´å€¼çš„å¹³å‡å€¼ã€‚

- ä¾‹å¦‚Â `arr = [2,3,4]`Â çš„ä¸­ä½æ•°æ˜¯Â `3`Â ã€‚
- ä¾‹å¦‚Â `arr = [2,3]`Â çš„ä¸­ä½æ•°æ˜¯Â `(2 + 3) / 2 = 2.5`Â ã€‚

å®ç° MedianFinder ç±»:

- `MedianFinder()`Â åˆå§‹åŒ–Â `MedianFinder`Â å¯¹è±¡ã€‚
- `void addNum(int num)`Â å°†æ•°æ®æµä¸­çš„æ•´æ•°Â `num`Â æ·»åŠ åˆ°æ•°æ®ç»“æ„ä¸­ã€‚
- `double findMedian()`Â è¿”å›åˆ°ç›®å‰ä¸ºæ­¢æ‰€æœ‰å…ƒç´ çš„ä¸­ä½æ•°ã€‚ä¸å®é™…ç­”æ¡ˆç›¸å·®Â `10-5`Â ä»¥å†…çš„ç­”æ¡ˆå°†è¢«æ¥å—ã€‚


**ç¤ºä¾‹ 1ï¼š**

>**è¾“å…¥**
>`["MedianFinder", "addNum", "addNum", "findMedian", "addNum", "findMedian"]`
>**è¾“å‡º**
>`[null, null, null, 1.5, null, 2.0]`

>**è§£é‡Š**
>`MedianFinder medianFinder = new MedianFinder();`
>`medianFinder.addNum(1);    // arr = [1]`
>`medianFinder.addNum(2);    // arr = [1, 2]`
>`medianFinder.findMedian(); // è¿”å› 1.5 ((1 + 2) / 2)`
>`medianFinder.addNum(3);    // arr[1, 2, 3]`
>`medianFinder.findMedian(); // return 2.0`

**æç¤º:**

- `-105Â <= num <= 105`
- åœ¨è°ƒç”¨Â `findMedian`Â ä¹‹å‰ï¼Œæ•°æ®ç»“æ„ä¸­è‡³å°‘æœ‰ä¸€ä¸ªå…ƒç´ 
- æœ€å¤šÂ `5 * 104`Â æ¬¡è°ƒç”¨Â `addNum`Â å’ŒÂ `findMedian`

# è§£é¢˜æ€è·¯ä¸å®ç°

æˆ‘ä»¬è¦å®ç°ä¸€ä¸ª **åŠ¨æ€æ•°ç»„**ï¼Œèƒ½éšæ—¶è¿”å›ä¸­ä½æ•°ï¼š

- å¤§é¡¶å †ï¼ˆMaxHeapï¼‰ï¼šä¿å­˜ **è¾ƒå°çš„ä¸€åŠ** æ•°æ®
- å°é¡¶å †ï¼ˆMinHeapï¼‰ï¼šä¿å­˜ **è¾ƒå¤§çš„ä¸€åŠ** æ•°æ®
- ä¿è¯ï¼š
    1. ä¸¤ä¸ªå †çš„å…ƒç´ æ•°é‡å·®ä¸è¶…è¿‡ 1
    2. å¤§é¡¶å †å †é¡¶ â‰¤ å°é¡¶å †å †é¡¶
è¿™æ ·ï¼š
- **æ€»å…ƒç´ ä¸ªæ•°ä¸ºå¶æ•°** â†’ ä¸­ä½æ•° = ä¸¤ä¸ªå †é¡¶çš„å¹³å‡å€¼
- **æ€»å…ƒç´ ä¸ªæ•°ä¸ºå¥‡æ•°** â†’ ä¸­ä½æ•° = å…ƒç´ æ›´å¤šçš„å †çš„å †é¡¶

| **ç»´åº¦**    | **åˆ†æå†…å®¹**                                                                                                                                                        |
| --------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **æ ¸å¿ƒæ€è·¯**  | **åŠ¨æ€å¹³è¡¡å¯¹é¡¶å †**ã€‚<br>1. **æœ€å¤§å † (`max_heap`)**ï¼šå­˜å‚¨æ•°æ®æµä¸­è¾ƒå°çš„**å·¦åŠéƒ¨åˆ†**ã€‚å †é¡¶æ˜¯å·¦åŠéƒ¨çš„æœ€å¤§å€¼ã€‚<br>2. **æœ€å°å † (`min_heap`)**ï¼šå­˜å‚¨æ•°æ®æµä¸­è¾ƒå¤§çš„**å³åŠéƒ¨åˆ†**ã€‚å †é¡¶æ˜¯å³åŠéƒ¨çš„æœ€å°å€¼ã€‚<br>3. **ä¸­ä½æ•°å®šä½**ï¼šä¸­ä½æ•°å¿…ç„¶ç”±è¿™ä¸¤ä¸ªå †çš„å †é¡¶äº§ç”Ÿã€‚ |
| **å¹³è¡¡è§„åˆ™**  | ç¡®ä¿ `max_heap` çš„å¤§å°æ€»æ˜¯ç­‰äº `min_heap` æˆ–æ¯”å®ƒå¤š 1 ä¸ªã€‚è¿™æ ·å½“æ€»æ•°ä¸ºå¥‡æ•°æ—¶ï¼Œ`max_heap` å †é¡¶å°±æ˜¯ä¸­ä½æ•°ã€‚                                                                                         |
| **æ—¶é—´å¤æ‚åº¦** | 1. **`addNum`**: $O(\log N)$ï¼Œæ ‡å‡†çš„å †æ’å…¥å¤æ‚åº¦ã€‚<br>2. **`findMedian`**: $O(1)$ï¼Œç›´æ¥è¯»å–å †é¡¶ã€‚                                                                                  |
| **ç©ºé—´å¤æ‚åº¦** | $O(N)$ï¼Œå­˜å‚¨æ•°æ®æµä¸­çš„æ‰€æœ‰å…ƒç´ ã€‚                                                                                                                                             |
## æ–¹æ³•ä¸€ï¼š

```python
class MedianFinder:

    def __init__(self):
        self.max_heap = []
        self.min_heap = []

    def addNum(self, num: int) -> None:
        if not self.max_heap or num <= -self.max_heap[0]:
            heapq.heappush(self.max_heap, -num)
        else:
            heapq.heappush(self.min_heap, num)
        
        if len(self.max_heap) > len(self.min_heap) + 1:
            heapq.heappush(self.min_heap, -heapq.heappop(self.max_heap))
        elif len(self.min_heap) > len(self.max_heap):
            heapq.heappush(self.max_heap, -heapq.heappop(self.min_heap))
        

    def findMedian(self) -> float:
        if len(self.max_heap) == len(self.min_heap):
            return (-self.max_heap[0] + self.min_heap[0]) /2
        else:
            return -self.max_heap[0]
```