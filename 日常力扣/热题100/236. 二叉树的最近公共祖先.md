ğŸ·ä¸­ç­‰ #æ ‘ #æ·±åº¦ä¼˜å…ˆæœç´¢ #äºŒå‰æ ‘ 

ç»™å®šä¸€ä¸ªäºŒå‰æ ‘, æ‰¾åˆ°è¯¥æ ‘ä¸­ä¸¤ä¸ªæŒ‡å®šèŠ‚ç‚¹çš„æœ€è¿‘å…¬å…±ç¥–å…ˆã€‚

[ç™¾åº¦ç™¾ç§‘](https://baike.baidu.com/item/%E6%9C%80%E8%BF%91%E5%85%AC%E5%85%B1%E7%A5%96%E5%85%88/8918834?fr=aladdin)ä¸­æœ€è¿‘å…¬å…±ç¥–å…ˆçš„å®šä¹‰ä¸ºï¼šâ€œå¯¹äºæœ‰æ ¹æ ‘ T çš„ä¸¤ä¸ªèŠ‚ç‚¹ pã€qï¼Œæœ€è¿‘å…¬å…±ç¥–å…ˆè¡¨ç¤ºä¸ºä¸€ä¸ªèŠ‚ç‚¹ xï¼Œæ»¡è¶³ x æ˜¯ pã€q çš„ç¥–å…ˆä¸” x çš„æ·±åº¦å°½å¯èƒ½å¤§ï¼ˆ**ä¸€ä¸ªèŠ‚ç‚¹ä¹Ÿå¯ä»¥æ˜¯å®ƒè‡ªå·±çš„ç¥–å…ˆ**ï¼‰ã€‚â€

**ç¤ºä¾‹ 1ï¼š**

![|200](https://assets.leetcode.com/uploads/2018/12/14/binarytree.png)

>è¾“å…¥ï¼š`root = [3,5,1,6,2,0,8,null,null,7,4], p = 5, q = 1`
>è¾“å‡ºï¼š`3`
>è§£é‡Šï¼š`èŠ‚ç‚¹ 5 å’ŒèŠ‚ç‚¹ 1 çš„æœ€è¿‘å…¬å…±ç¥–å…ˆæ˜¯èŠ‚ç‚¹ 3 ã€‚`

**ç¤ºä¾‹ 2ï¼š**

![| 200](https://assets.leetcode.com/uploads/2018/12/14/binarytree.png)

>è¾“å…¥ï¼š`root = [3,5,1,6,2,0,8,null,null,7,4], p = 5, q = 4`
>è¾“å‡ºï¼š`5`
>è§£é‡Šï¼š`èŠ‚ç‚¹ 5 å’ŒèŠ‚ç‚¹ 4 çš„æœ€è¿‘å…¬å…±ç¥–å…ˆæ˜¯èŠ‚ç‚¹ 5 ã€‚å› ä¸ºæ ¹æ®å®šä¹‰æœ€è¿‘å…¬å…±ç¥–å…ˆèŠ‚ç‚¹å¯ä»¥ä¸ºèŠ‚ç‚¹æœ¬èº«ã€‚`

ç¤ºä¾‹ 3ï¼š

>è¾“å…¥ï¼š`root = [1,2], p = 1, q = 2`
>è¾“å‡ºï¼š`1`

**æç¤ºï¼š**

- æ ‘ä¸­èŠ‚ç‚¹æ•°ç›®åœ¨èŒƒå›´Â `[2, 105]`Â å†…ã€‚
- `-109 <= Node.val <= 109`
- æ‰€æœ‰Â `Node.val`Â `äº’ä¸ç›¸åŒ`Â ã€‚
- `p != q`
- `p`Â å’ŒÂ `q`Â å‡å­˜åœ¨äºç»™å®šçš„äºŒå‰æ ‘ä¸­ã€‚

## è§£é¢˜æ€è·¯ä¸å®ç°

- æƒ³è±¡æ¯ä¸ªèŠ‚ç‚¹æ˜¯ä¸€ä¸ªå‘˜å·¥ï¼Œéƒ½è¦å‘ä¸Šçº§ï¼ˆçˆ¶èŠ‚ç‚¹ï¼‰**æ±‡æŠ¥æ˜¯å¦åœ¨è‡ªå·±è¾–åŒºæ‰¾åˆ°äº†ç›®æ ‡äººï¼ˆp æˆ– qï¼‰**ã€‚

|**ç»´åº¦**|**æ™®é€šäºŒå‰æ ‘ LCA**|**äºŒå‰æœç´¢æ ‘ (BST) LCA**|
|---|---|---|
|**ç®—æ³•ç±»å‹**|æ·±åº¦ä¼˜å…ˆæœç´¢ (DFS) / ååºéå†|è·¯å¾„è¿½è¸ª / äºŒåˆ†æŸ¥æ‰¾æ€æƒ³|
|**åˆ¤æ–­ä¾æ®**|å­æ ‘æ˜¯å¦è¿”å›äº†ç›®æ ‡èŠ‚ç‚¹|èŠ‚ç‚¹æ•°å€¼ (`val`) çš„å¤§å°å…³ç³»|
|**æœç´¢èŒƒå›´**|**å…¨å±€æœç´¢**ï¼šé€šå¸¸éœ€è¦è®¿é—®å¤§éƒ¨åˆ†èŠ‚ç‚¹|**å±€éƒ¨æœç´¢**ï¼šåªè®¿é—®ä»æ ¹åˆ°ç»“æœçš„ä¸€æ¡è·¯å¾„|
|**æœ€ä¼˜æ—¶é—´å¤æ‚åº¦**|$O(N)$ (å¿…é¡»çœ‹å®Œå…¨éƒ¨èŠ‚ç‚¹)|$O(H)$ ($H$ ä¸ºæ ‘é«˜ï¼Œé€šå¸¸è¿œå°äº $N$)|
|**ç©ºé—´å¤æ‚åº¦**|$O(H)$ (é€’å½’äº§ç”Ÿçš„ç³»ç»Ÿæ ˆ)|$O(1)$ (é€šå¸¸ç”¨å¾ªç¯å®ç°ï¼Œä¸å é¢å¤–ç©ºé—´)|

## æ–¹æ³•ä¸€ï¼šé€’å½’

```python
class Solution:
    def lowestCommonAncestor(self, root: 'TreeNode', p: 'TreeNode', q: 'TreeNode') -> 'TreeNode':
        if not root or root == q or root == p:
            return root
        left = self.lowestCommonAncestor(root.left,p,q)
        right = self.lowestCommonAncestor(root.right,p,q)
        if left and right:
            return root
        return left if left else right
```


## æ–¹æ³•äºŒï¼šäºŒå‰æœç´¢æ ‘ï¼ˆä»…BSTå¯è¡Œï¼‰

```python
def lowestCommonAncestor(self, root, p, q):
    while root:
        if p.val < root.val and q.val < root.val:
            root = root.left  # éƒ½åœ¨å·¦è¾¹ï¼Œå¾€å·¦èµ°
        elif p.val > root.val and q.val > root.val:
            root = root.right # éƒ½åœ¨å³è¾¹ï¼Œå¾€å³èµ°
        else:
            return root       # åªè¦åˆ†å‰äº†ï¼Œå½“å‰èŠ‚ç‚¹å°±æ˜¯ LCA
```